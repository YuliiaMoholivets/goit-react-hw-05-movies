"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[205],{205:function(e,t,r){r.r(t),r.d(t,{default:function(){return _}});var n=r(861),a=r(439),u=r(757),i=r.n(u),s=r(87),c=r(689),o=r(184),p=function(e){var t=e.searchMovies,r=(0,c.TH)();return(0,o.jsx)("ul",{children:t.map((function(e){var t=e.id,n=e.original_title;return(0,o.jsx)("li",{children:(0,o.jsx)(s.rU,{to:"/movies/".concat(t),state:{from:r},children:n})},t)}))})},f=r(791),l="Movies_SearchForm__fZVtZ",d="Movies_Button__21Bhz",m="Movies_label__zc-xD",h="Movies_input__3JANh",v=function(){var e=(0,s.lr)(),t=(0,a.Z)(e,2),r=t[0],n=t[1],u=r.get("firstValue");return(0,o.jsx)("div",{children:(0,o.jsxs)("form",{className:l,onSubmit:function(e){e.preventDefault(),""!==(u=e.currentTarget.elements.name.value).trim()&&n({firstValue:u})},children:[(0,o.jsx)("input",{className:h,name:"name",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search film"}),(0,o.jsx)("button",{type:"submit",className:d,children:(0,o.jsx)("span",{className:m,children:"Search"})})]})})},g=r(874),_=function(){var e=(0,f.useState)([]),t=(0,a.Z)(e,2),r=t[0],u=t[1],c=(0,f.useState)(null),l=(0,a.Z)(c,2),d=l[0],m=l[1],h=(0,f.useState)(!1),_=(0,a.Z)(h,2),x=_[0],w=_[1],b=(0,s.lr)(),Z=(0,a.Z)(b,1)[0].get("firstValue");return(0,f.useEffect)((function(){if(Z){var e=function(){var e=(0,n.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(!0),e.next=4,(0,g.FP)(Z);case 4:if((t=e.sent).length){e.next=8;break}return m("There are no movies for your request"),e.abrupt("return");case 8:u(t),m(null),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),m(e.t0.message);case 15:return e.prev=15,w(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(){return e.apply(this,arguments)}}();e()}}),[Z]),(0,f.useEffect)((function(){d&&alert(d)}),[d]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(v,{}),r.length>0&&!x&&(0,o.jsx)(p,{searchMovies:r})]})}},874:function(e,t,r){r.d(t,{FP:function(){return l},Yc:function(){return v},fI:function(){return _},s7:function(){return p},s9:function(){return m}});var n=r(861),a=r(757),u=r.n(a),i=r(912),s=r(958);i.Z.defaults.baseURL="https://api.themoviedb.org/3/";var c="817d33fa7e0ddfc368fbd7439a742f76",o={api_key:c,language:"en-US",include_adult:!1};function p(){return f.apply(this,arguments)}function f(){return(f=(0,n.Z)(u().mark((function e(){var t,r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.get("/trending/movie/day",{params:o});case 2:return t=e.sent,r=t.data,n=r.results.map((function(e){return{id:e.id,original_title:e.original_title}})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return d.apply(this,arguments)}function d(){return d=(0,n.Z)(u().mark((function e(t){var r,n,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={query:t,api_key:c,language:"en-US",include_adult:!1},e.next=3,i.Z.get("/search/movie",{params:r});case 3:return n=e.sent,a=n.data,s=a.results.map((function(e){return{id:e.id,original_title:e.original_title}})),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=(0,n.Z)(u().mark((function e(t){var r,n,a,c,p,f,l,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.get("/movie/".concat(t),{params:o});case 2:return r=e.sent,n=r.data,a=n.poster_path,c=n.original_title,p=n.release_date,f=n.vote_average,l=n.overview,d=n.genres,e.abrupt("return",{poster_path:a?"https://image.tmdb.org/t/p/w500"+a:s,original_title:c,release_date:p.slice(0,4),vote_average:f.toFixed(2),overview:l,genres:d.map((function(e){return e.name})).join(", ")});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return(g=(0,n.Z)(u().mark((function e(t){var r,n,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.get("/movie/".concat(t,"/credits"),{params:o});case 2:return r=e.sent,n=r.data,a=n.cast.map((function(e){var t=e.id,r=e.name,n=e.profile_path;return{id:t,name:r,profile_path:n?"https://image.tmdb.org/t/p/w500"+n:s}})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return x.apply(this,arguments)}function x(){return(x=(0,n.Z)(u().mark((function e(t){var r,n,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.get("/movie/".concat(t,"/reviews"),{params:o});case 2:return r=e.sent,n=r.data,a=n.results.map((function(e){return{id:e.id,author:e.author,content:e.content}})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},958:function(e,t,r){e.exports=r.p+"static/media/img.d25e8d14857edd0cff6b.png"}}]);
//# sourceMappingURL=205.ba3a4dc1.chunk.js.map